<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Play Perl</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://play-perl.org/api/event/atom">

    <link href="/vendors/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/vendors/fontawesome/css/font-awesome.css" rel="stylesheet">
    <link href="/vendors/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/css/common.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" href="/favicon.ico" sizes="16x16" type="image/x-icon">
    <link rel="icon" href="/favicon.png" sizes="16x16" type="image/png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/vendors/bootstrap/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/vendors/bootstrap/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/vendors/bootstrap/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/vendors/bootstrap/ico/apple-touch-icon-57-precomposed.png">

    <!-- notification messages -->
    <script type="text/template" id="template-notify">
        <div class="alert alert-<%= obj.type || 'error' %>">
          <button type="button" class="close" data-dismiss="alert">×</button>
          <% if (obj.message) { %>
            <%= message %>
          <% } else { %>
            Unknown <%= obj.type || 'error' %> message
          <% } %>
        </div>
    </script>

    <!-- current user widget from right-top corner -->
    <script type="text/template" id="template-current-user">
      <% if (obj.notifications && obj.notifications.length) { %>
        <span class="pull-left current-user-notifications-icon"><a href="#" class="notifications"><i class="icon-envelope-alt icon-large"></i></a></span>
      <% } %>
      <ul class="nav">
        <li class="dropdown">
          <% if (registered === 1) { %>
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><%= login %></a>
            <ul class="dropdown-menu">
              <li>
                <a href="#" class="settings">Settings</a>
                <a href="#" class="logout">Logout</a>
              </li>
            </ul>
          <% } else { %>
            <!-- TODO: refactor to use views/user/signin.js -->
            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-signin"></i> Sign In</a>
            <ul class="dropdown-menu">
              <li>
                <a href="/auth/twitter">with Twitter</i></a>
                <a href="#" class="login-with-persona">with Email</a>
              </li>
            </ul>
          <% } %>
        </li>
      </ul>
    </script>

    <!-- landing page -->
    <script type="text/template" id="template-home">
        <div class="container-fluid hero-unit">
            <h1>Play Perl</h1>
            <h2>What&apos;s going on here?</h2>
            <p>
            <ol>
                <li>This is your public to-do list.</li>
                <li>This is a gamified platform for connecting and encouraging people.</li>
                <li>This is a social network for Perl developers.</li>
                <li>This is a place to gather and provide feedback on the stuff you did and on the stuff you&apos;re going to do.</li>
                <li>Finally, you can get game points here!</li>
            </ol>
            </p>
            <p>
            <% if (registered) { %>
              <a href="/" class="btn btn-large btn-primary">Go to your profile</a>
            <% } else { %>
              <strong>Sign in:</strong>
              <span class="signin"></span>
            <% } %>
            </p>
        </div>
    </script>

    <script type="text/template" id="template-signin">
      <a href="/auth/twitter" class="btn btn-large btn-primary login-with-twitter">with Twitter</a>
      <a href="#" class="btn btn-large btn-primary login-with-persona">with Email</a>
    </script>

    <script type="text/template" id="template-about">
      <div class="container-fluid about">
        <h1>Play Perl</h1>
        <div>
          Play Perl is a new website for Perl developers.
        </div>
        <hr>
        <div class="row-fluid">
          <h2>Concepts</h2>
          <h3>Opensource, gamified</h3>
          <p>
          Gamification is great for tuning people motivations in a positive way.<br>
          Play Perl gives you points and achievements to be proud of.
          </p>
        </div>
        <div class='row-fluid'>
          <h3>Social Todo List</h3>
          <p>
          Play Perl allows you to announce your plans, gather the feedback, and find other people to cooperate with on common goals.
          </p>
        </div>
        <div class="row-fluid">
          <h3>Collaborative prioritization</h3>
          <p>
          By liking other people's quests, you promise them points, — or give them points right now if they already completed the quest.<br>
          So you can quickly gather opinions on what the community would like to be see more - new feature, internals refactoring, or new blog post.
          </p>
        </div>
        <hr>
        <div class="row-fluid">
          <h2>Testimonials and announcements</h2>
          <p>
          <ul>
            <li><a href="http://blogs.perl.org/users/david_mertens/2013/02/i-3-play-perl.html">David Mertens: I &lt;3 play-perl</a></li>
            <li><a href="http://enetdown.org/dot-plan/posts/2013/02/12/play_perl_is_a_game_changer/">zmughal: Play Perl is a game changer</a></li>
            <li><a href="http://babyl.dyndns.org/techblog/entry/play-perl">yanick: Playing with Play Perl</a></li>
          </ul>
          <ul>
            <li><a href="http://blogs.perl.org/users/vyacheslav_matjukhin/2013/02/play-perl-is-online.html">Play Perl is online</a></li>
            <li><a href="http://blogs.perl.org/users/vyacheslav_matjukhin/2013/02/play-perl-first-24-hours-and-the-power-of-likes.html">Play Perl: first 24 hours and the power of likes</a></li>
            <li><a href="http://blogs.perl.org/users/vyacheslav_matjukhin/2013/02/play-perl-is-more-popular-than-rtcpanorg.html">Play Perl is more popular than rt.cpan.org!</a></li>
          </p>
        </div>
        <hr>
        <div class="row-fluid">
          <h2>FAQ</h2>
          <dl>
            <dt>"Quest"? "Player"? What is this?</dt>
            <dd>Quest is any kind of task you're planning to do. Player is you, and other people are players too. You get 1+{number-of-likes} points for each quest you close.</dd>
            <dt>There are many other bug trackers! How is Play Perl different?</dt>
            <dd>
            Play Perl considers people to be more important than projects, and fun to be more important than planning. We're going to optimize its mechanics for:
            <ol>
              <li>People feeling appreciated;</li>
              <li>Praise being granted and received wherever and whenever necessary;</li>
              <li>Contribution simplified as much as possible.</li>
            </ol>
            There are many more ideas for future features, check out our <a href="https://github.com/berekuk/play-perl/wiki/DesignDraft">DesignDraft</a>.
            </dd>

            <dt>Is this for Perl 5 or for Perl 6?</dt>
            <dd>
              Both.<br>
              And also Moe, p2 and anything else that will grow out of Perl community in the future.
            </dd>

            <dt>Can I use this for my non-Perl tasks?</dt>
            <dd>
              Please don't.<br>
              Here's the short list of rules for possible quests:
              <ul>
                <li>all quests are good if they're related to Perl somehow;</li>
                <li>self-referential quests such as "get one more point" or "get to the top of players list" are not ok for obvious reasons;</li>
                <li>quests not relevant to Perl are temporarily discouraged, because I didn't figure out yet how to a) allow them; b) keep the game points meaningful.</li>
              </ul>
              <p>
              On the other hand, don't hesitate to create a quest even if you feel like the task is too small and not worth a point. Anything that helps you to move forward is fine, and points=likes+1 rule ensures that everyone, in theory, will get a fair score in the end.
              <p>
              <a href="http://play-perl.org/quest/512382e3e05a54857e000085">More details on the topic of non-perl quests.</a><br>
              (tl;dr: play-github is going to happen one day.)
            </dd>

            <dt>This doesn't motivate me.</dt>
            <dd>That's ok. <a href="http://berekuk.github.com/perl-motivation-survey/">People are different.</a></dd>

            <dt>I can't use this without feature X.</dt>
            <dd>Why don't you <a href="https://github.com/berekuk/play-perl">implement it yourself?</a></dd>

            <dt>How can I add a link to a CPAN module in comments easily?</dt>
            <dd>If your module name contains <code>::</code>, it'll turn into the link to MetaCPAN automatically. Use <code>cpan:Foo</code> syntax for one-word module names.</dd>

          </div>
          <hr>
          <div class="row-fluid">
            <h2>Technology</h2>
            Play Perl is built with:
            <ul>
              <li><a href="http://perldancer.org/">Dancer</a></li>
              <li><a href="http://documentcloud.github.com/backbone/">Backbone.js</a></li>
              <li><a href="http://twitter.github.com/bootstrap/">Bootstrap</a></li>
              <li><a href="http://www.mongodb.org/">MongoDB</a></li>
            </ul>
            <p>
              Backend is completely separated from the frontend. Backend API is documented <a href="https://github.com/berekuk/play-perl/blob/master/app/API.md">here</a>, feel free to use it.<br>
              (But please don't abuse game mechanics or you'll be banned.)
            </p>
            <p>
              Play Perl sources are open. <a href="https://github.com/berekuk/play-perl">Clone it on GitHub!</a>
            </p>
          </div>
        </div>
    </script>

    <!-- profile page - user and his/her quests -->
    <script type="text/template" id="template-dashboard">
      <div class="container-fluid">
        <div class="row-fluid">
          <div class="span3">
            <div class="user">
            </div>
            <div class="new-quest" style="display:none">
              <button type="button" class="btn btn-primary quest-add-dialog">New quest</button>
            </div>
          </div>
          <div class="span9">
            <div class="open-quests"></div>
            <div class="closed-quests"></div>
            <div class="abandoned-quests"></div>
          </div>
        </div>
      </div>
    </script>

    <script type="text/template" id="template-user-big">
      <div class="well">
        <% if (obj.twitter) {
            if (twitter.screen_name) { %>
          <img src="http://api.twitter.com/1/users/profile_image?screen_name=<%= twitter.screen_name %>&size=bigger" width=73 height=73/>
        <% } } %>
        <h4>
          <%= login %>
          <% if (my) { %>
              <span class="mini-button-block"><a href="#" class="settings"><i class="icon-wrench"></i></a></span>
          <% } %>
          <span class="badge badge-info" data-toggle="tooltip" title='points are granted for each completed quest and each "like" on those quests'><%= points %></span>
        </h4>
        <% if (obj.twitter) {
          if (twitter.screen_name) { %>
            <a href="https://twitter.com/<%= twitter.screen_name %>">
              <i class="icon-twitter icon-large"></i>
              @<%= twitter.screen_name %>
            </a>
        <% } } %>
      </div>
    </script>

    <script type="text/template" id="template-user-settings-box">
      <div class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3>Player Settings <i class="icon-spinner icon-spin"></i>
          </h3>
        </div>
        <div class="modal-body">
          <div class="row-fluid">
            <div class="settings-subview"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary">Save settings</button>
        </div>
      </div>
    </script>

    <script type="text/template" id="template-notifications-box">
      <div class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3>Notifications</i>
          </h3>
        </div>
        <div class="modal-body">
          <div class="row-fluid">
            <div class="subview"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary">Dismiss</button>
        </div>
      </div>
    </script>

    <script type="text/template" id="template-notifications">
      <%- notifications[0].params %>
    </script>

    <script type="text/template" id="template-user-settings">
      <div class="form-horizontal">
        <% if (obj.email_confirmed == 'persona') { %>
          <h4><%- obj.email || 'oops' %>
          <span class="label label-success">Persona</span>
          </h4>
        <% } else { %>
          <input name="email" type="email" placeholder="Email" value="<%- obj.email %>">
          <span class="email-status <%= (obj.hideEmailStatus || obj.email_confirmed == 'persona') ? "hide" : "" %>">
            <% if (obj.email_confirmed) { %>
              <span class="label label-success">Confirmed</span>
            <% } else if (obj.email) { %>
              <button class="btn btn-warning resend-email-confirmation">Not confirmed. Resend confirmation key?</button>
            <% } %>
          </span>
        <% } %>
      </div>
      <div>
        <span class="muted">Notify me by email when someone...</span>
        <label class="checkbox">
            <input name="notify-comments" type="checkbox" <%= (obj.notify_comments > 0) ? 'checked="checked"' : '' %>>comments on my quest
        </label>
        <label class="checkbox">
            <input name="notify-likes" type="checkbox" <%= (obj.notify_likes > 0) ? 'checked="checked"' : '' %>>likes my quest
        </label>
      </div>
    </script>

    <script type="text/template" id="template-quest-collection">
      <div>
        <table class="table table-bordered quests-list table-hover hide">
          <tr class="show-more success">
            <td><a href="#">Show more...</a></td>
          </tr>
        </table>
        <span class="progress-spin"></span>
      </div>
    </script>

    <script type="text/template" id="template-quest-small">
      <td>
        <% if (obj.showAuthor) { %>
          <%= partial.user({ login: user, colon: true }) %>
        <% } %>
        <a href="/quest/<%- _id %>"><%- name %></a>

        <% if (obj.comment_count) { %>
          <a href="/quest/<%= _id %>"><span class="badge badge-info"><i class="icon-comment"></i> <%= comment_count %></span></a>
          <% } %>

        <span class="likes"></span>

        <span class="pull-right">
          <%= partial.quest_labels({ status: status, type: obj.type }) %>
        </span>
      </td>
    </script>

    <!-- explore tab -->
    <script type="text/template" id="template-explore">
      <div class="row-fluid">
        <div class="span1"></div>
        <div class="span10">
          <ul class="nav nav-tabs explore-nav">
              <li><a href="#" data-explore-tab="latest">Latest</a></li>
              <li><a href="#" data-explore-tab="unclaimed">Unclaimed</a></li>
              <li><a href="#" data-explore-tab="open">Best open</a></li>
              <li><a href="#" data-explore-tab="closed">Best completed</a></li>
          </ul>
          <div>
            <div class="explore-tab-content"></div>
          </div>
        </div>
    </script>

    <!-- registration form -->
    <script type="text/template" id="template-register">
      <div class="row-fluid">
        <div class="span3"></div>
        <div class="span6">
          <h2>Welcome to the Play Perl<% if (obj.twitter) { %>, <i class="icon-twitter icon-large"></i> <%= twitter.screen_name %><% } %>!
          </h2>
          <h3>One final step before you can join your fellow hackers...</h3>
          <div class="registration-form">
            <div class="control-group login">
              <input name="login" type="text" placeholder="Login (required)">
            </div>
            <div class="settings-subview"></div>
            <button class="btn btn-primary btn-large submit">Register</button>
            <p>
            <!-- TODO - grap striped-button bootstrap addon from the web? -->
            <div class="progress progress-striped active">
              <div class="bar" style="width: 100%"></div>
            </div>
            </p>
          </div>
        </div>
      </div>
    </script>

    <script type="text/template" id="template-confirm-email">
      <div class="row-fluid">
        <div class="span3"></div>
        <div class="span6">
          <h2>Confirming email...</h2>
        </div>
      </div>
    </script>

    <!-- users list -->
    <script type="text/template" id="template-user-collection">
      <div class="row-fluid">
        <div class="span3">
          <div class="well well-small">
            Players are sorted by:
            <ol>
              <li>game points;</li>
              <li>open quests.</li>
            </ol>
          </div>
        </div>
        <div class="span6">
          <table class="table table-bordered users-list table-hover hide">
            <tr class="show-more success">
              <td><a href="#">Show more...</a></td>
            </tr>
          </table>
          <span class="progress-spin"></span>
        </div>
      </div>
    </script>


    <script type="text/template" id="template-user-small">
      <td>
        <% if (obj.twitter && obj.twitter.screen_name) { %>
          <img class="avatar avatar-mini" src="http://api.twitter.com/1/users/profile_image?screen_name=<%= obj.twitter.screen_name %>&size=mini"/>
        <% } %>
        <a href="/player/<%= login %>"><%= login %></a>
        <span class="badge badge-info"><%= points %></span>

        <% if (currentUser && login == currentUser) { %>
          <div class="current-user-leaderboard-tip">
            <!-- Bootstrap 2.3.0 tries to line up the text vertically, so we have to use &nbsp; -->
            <span data-toggle="tooltip" data-trigger="manual" data-placement="right" title="This&nbsp;is&nbsp;you.&nbsp;Climb&nbsp;up!"></span>
          </div>
        <% } %>

        <% if (obj.open_quests) { %>
          <span class="label label-inverse open-quest-count-label"><%= obj.open_quests %> quest<%= obj.open_quests > 1 ? 's' : '' %></span>
        <% } %>
      </td>
    </script>

    <!-- events list -->
    <script type="text/template" id="template-event-collection">
      <div class="row-fluid events-list hide">
        <div class="span8 offset2">
          <button class="show-more btn btn-primary">Show more</button>
          <span class="progress-spin"></span>
        </div>

        <div class="span2">
          <a href="http://play-perl.org/api/event/atom" class="btn btn-warning"><i class="icon-rss"></i> RSS</a>
        </div>
      </div>
    </script>

    <!-- common box for any event type -->
    <script type="text/template" id="template-event-any">
      <div>
        <div class="subview"></div>
        <time class="timeago" datetime="<%= new Date(ts * 1000).toISOString() %>"><%= new Date(ts * 1000).toISOString() %></time>
        <hr>
      </div>
    </script>

    <script type="text/template" id="template-event-unknown">
        <em>Unknown event type. Try to refresh the page.</em>
    </script>

    <script type="text/template" id="template-event-add-quest">
        <%= partial.user({ login: object.user }) %> started a new quest: <a href="/quest/<%= object_id %>"><%- object.name %></a>.
    </script>

    <script type="text/template" id="template-event-close-quest">
        <%= partial.user({ login: object.user }) %> completed a quest: <a href="/quest/<%= object_id %>"><%- object.name %></a>.
    </script>

    <script type="text/template" id="template-event-reopen-quest">
        <%= partial.user({ login: object.user }) %> reopened a quest: <a href="/quest/<%= object_id %>"><%- object.name %></a>.
    </script>

    <script type="text/template" id="template-event-abandon-quest">
        <%= partial.user({ login: object.user }) %> abandoned a quest: <a href="/quest/<%= object_id %>"><%- object.name %></a>.
    </script>

    <script type="text/template" id="template-event-resurrect-quest">
        <%= partial.user({ login: object.user }) %> resurrected a quest: <a href="/quest/<%= object_id %>"><%- object.name %></a>.
    </script>

    <script type="text/template" id="template-event-add-user">
        <%= partial.user({ login: object.login }) %> joins Play Perl!
    </script>

    <script type="text/template" id="template-event-add-comment">
        <%= partial.user({ login: object.author }) %>
        commented on
        <%= partial.user({ login: object.quest.user }) %>'s quest
        <a href="/quest/<%= object.quest._id %>"><%- object.quest.name %></a>:
        <div class="well well-small event-comment-well">
          <%= pp.app.view.markdownToHtml(object.body) %>
        </div>
    </script>

    <script type="text/template" id="template-quest-add">
      <div>
        <div id="addQuest" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Add a quest</h3>
          </div>
          <div class="modal-body modal-quest-add">
            <div class="row-fluid add-quest-field">
              <div>
                <small class="muted">Quest type is optional.</small>
              </div>
              <div class="btn-group quest-type-select">
                <button type="button" class="btn" quest-type="bug">Bug</button>
                <button type="button" class="btn" quest-type="blog">Blog post</button>
                <button type="button" class="btn" quest-type="feature">New feature</button>
              </div>
            </div>
            <div class="row-fluid add-quest-field">
              <small class="muted">Write a short description of the task here. You can add details later in the comments.</small>
              <input name="name" type="text" class="span12 quest-edit">
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary quest-add">Go!</button>
          </div>
        </div>
      </div>
    </script>

    <!-- quest details page -->
    <script type="text/template" id="template-quest-page">
      <div class="quest-big"></div>
      <div class="comments"></div>
    </script>

    <script type="text/template" id="template-quest-big">
      <div class="<%= "quest-big-" + ext_status %> quest-big">
        <div>
          <% if (user == '') { %>
            <%= partial.user({ login: obj.author }) %><span class="muted"> suggests a quest:</span>
          <% } else { %>
            <%= partial.user({ login: obj.user }) %><span class="muted"> is on a quest<%= (obj.user == obj.author) ? '' : ' by' + partial.user({ login: obj.author }) %>:</span>
            <% if (my) { %>
              <%= partial.edit_tools() %>
            <% } %>
          <% } %>
        </div>

        <div class="quest-big-labels">
          <%= partial.quest_labels({ status: status, type: obj.type }) %>
        </div>

        <h2>
          <span class="quest-title"><%- name %></span>
          <% if (my) { %>
            <input class="quest-edit" type="text" value="<%- name %>" style="display: none">
          <% } %>

          <!--
          // this code is buggy; because of QuestBig view double rendering issue, 'Tweet' button is often rendered as a broken link
          // also, the current 'Tweet' button location is too annoying
        <% if (my) { %>
          <a
              href="https://twitter.com/share"
              class="twitter-share-button"
              data-lang="en"
              data-url="http://play-perl.org/quest/<%= _id %>"
              data-text="<% if (status === 'open') { %>I've got the new quest:<% } else { %>I've completed the quest:<% } %> <%- name %>" data-hashtags="playperl">Tweet</a>
        <% } %>
        -->
        </h2>

        <div class="likes"></div>

        <% if (my) { %> <!-- quest belongs to the current user -->

          <div>
          <!-- close/reopen button -->
          <% if (status === 'open') { %>
            <button class="quest-close btn btn-primary">Complete</button>
            <button class="quest-leave btn">Leave</button>
            <button class="quest-abandon btn">Abandon</button>
          <% } else if (status === 'closed') { %>
          <button class="quest-reopen btn btn-primary">Reopen</button>
          <% } else if (status === 'abandoned') { %>
          <button class="quest-resurrect btn">Resurrect</button>
          <% } %>
          </div>

        <% } else if (user == '') { %>
          <span class="muted">This quest is not claimed by anybody. Would you like to take it?</span>
          <button class="quest-join btn btn-primary">Take</button>
        <% } %>
      </div>
    </script>

    <!-- like/unlike button  -->
    <script type="text/template" id="template-quest-like">
      <!-- likes count -->
      <% if (likes && likes.length) { %>
          <span class="badge badge-success" data-toggle="tooltip" title="<%= likes.slice(0, 10).join(', ') %><%= (likes.length <= 10) ? '' : ' and ' + (likes.length - 10) + ' more' %>">
          <i class="icon-thumbs-up"></i> <%= likes.length %>
        </span>
      <% } %>
      <!-- like button -->
      <% if (currentUser && !my) { %>
        <span class="like-button hide">
          <% if (meGusta) { %>
            <button class="btn btn-mini quest-unlike" type="button">Unlike</button>
          <% } else { %>
            <button class="btn btn-mini btn-primary quest-like" type="button">Like</button>
          <% } %>
        </span>
      <% } %>
    </script>

    <script type="text/template" id="template-comment-collection">
      <div class="comments-list" style="display:none">
      </div>
      <% if (currentUser) { %>
      <div class="comment-add">
        <textarea name="comment" rows="3" placeholder="Comment (Markdown syntax supported)" class="span6"></textarea>
        <div class="well well-small comment-preview hide"></div>
        <div>
          <button class="btn btn-primary btn-large submit disabled">Add comment</button>
        </div>
      </div>
      <% } else { %>
      <div>
        <strong>Sign in to comment:</strong>
        <span class="signin"></span>
      </div>
      <% } %>
    </script>

    <script type="text/template" id="template-comment">
      <div class="well well-small">
        <% if (my) { %>
          <%= partial.edit_tools() %>
        <% } %>

        <p>
        <div class="comment-content">
          <%= pp.app.view.markdownToHtml(body) %>
        </div>
        <% if (my) { %>
            <textarea class="comment-edit" style="display: none"><%- body %></textarea>
        <% } %>
        </p>
        <%= partial.user({ login: author }) %>
        <% if (obj.ts) { %>
        <time class="timeago" datetime="<%= new Date(ts * 1000).toISOString() %>"><%= new Date(ts * 1000).toISOString() %></time>
        <% } %>
      </div>
    </script>

    <script type="text/template" id="template-progress">
      <i class="icon-spinner icon-spin" style="display:none"></i>
    </script>

    <!-- Partials -->
    <script type="text/template" id="partial-user">
      <% if (login) { %>
      <a href="/player/<%= login %>" class="label"><%= login + (obj.colon ? ':' : '') %></a>
      <% } %>
    </script>

    <script type="text/template" id="partial-quest-labels">
      <% if (obj.type) { %>
        <span class="label label-inverse"><%= type %></span>
      <% } %>
      <span class="label label-<%= status === 'open' && 'warning' %>"><%= status === 'closed' ? 'complete' : status %></span>
    </script>

    <script type="text/template" id="partial-edit-tools">
      <div class="pull-right mini-button-block">
        <label> <!-- label fixes the font size, even inside h2 -->
          <a href="#" class="edit"><i class="icon-pencil"></i></a>
          <a href="#" class="delete"><i class="icon-remove"></i></a>
        </label>
      </div>
    </script>

    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-36251424-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
     </script>

  </head>

  <body>
    <div id="wrap">
      <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
          <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </a>
            <a class="brand" href="/">Play Perl</a>
            <div class="nav-collapse collapse">
              <ul class="nav">
                <li class="menu-item-home"><a href="/">Home</a></li>
                <li class="menu-item-event-list"><a href="/feed">News Feed</a></li>
                <li class="menu-item-user-list"><a href="/players">Players</a></li>
                <li class="menu-item-explore"><a href="/explore">Explore</a></li>
                <li class="menu-item-about"><a href="/about">About</a></li>
              </ul>
              <p class="navbar-text pull-right"></p>
              <div class="pull-right current-user-box"></div>
            </div>
          </div>
        <div id="news_ticker" align="center"></div>
        </div>
      </div>
      <div class="app-view-container container"></div>
      <div id="push"></div>
    </div>
    <div id="footer">
      <div class="container">
        <p class="muted credit">
          <a href="https://github.com/berekuk/play-perl/issues/new">Report a bug</a>
          &nbsp; | &nbsp;
          <a href="https://github.com/berekuk/play-perl">Github</a>
          &nbsp; | &nbsp;
          <a href="http://blogs.perl.org/mt/mt-search.fcgi?blog_id=310&tag=play-perl&limit=20">Blog posts with some explanations</a>
          &nbsp; | &nbsp;
          © 2012-2013 <a href="https://metacpan.org/author/MMCLERIC">Vyacheslav Matyukhin</a> and <a href="https://github.com/berekuk/play-perl/graphs/contributors">other contributors</a>
          </span>
        </p>
      </div>
    </div>

    <div id="user-settings"></div>
    <div id="notifications"></div>

    <!--
    Not in any template - user settings are modal and usually hidden anyway.
    It'd make no sense to copy-paste them into several views.
    -->

    <!-- Mozilla recommends not to self-host persona JS code while Persona is still in beta -->
    <script src="https://login.persona.org/include.js"></script>

    <script src="/vendors/jquery-1.7.1.min.js"></script>
    <script src="/vendors/autosize/jquery.autosize.js"></script>
    <script src="/vendors/bootstrap/js/bootstrap.min.js"></script>
    <script src="/vendors/bootbox.min.js"></script>
    <script src="/vendors/underscore-min.js"></script>
    <script src="/vendors/backbone-min.js"></script>
    <script src="/vendors/jquery.cookie.js"></script>
    <script src="/vendors/jquery.timeago.js"></script>
    <script src="/vendors/pagedown/Markdown.Converter.js"></script>
    <script src="/vendors/pagedown/Markdown.Sanitizer.js"></script>
    <script src="/jquery.li-scroller.1.0.js"
        type="text/javascript"></script>

<style>
/* liScroll styles */

.tickercontainer { /* the outer div with the black border */
border: 1px solid #000;
/*background: #fff;  */
width: 738px; 
height: 27px; 
margin: 0; 
padding: 0;
overflow: hidden; 
}
.tickercontainer .mask { /* that serves as a mask. so you get a sort of padding both left and right */
position: relative;
left: 10px;
top: 8px;
width: 718px;
overflow: hidden;
}
ul.newsticker { /* that's your list */
position: relative;
left: 750px;
font: bold 10px Verdana;
list-style-type: none;
margin: 0;
padding: 0;

}
ul.newsticker li {
float: left; /* important: display inline gives incorrect results when you check for elem's width */
margin: 0;
padding: 0;
/* background: #fff; */
}
ul.newsticker a {
white-space: nowrap;
padding: 0;
color: #ff0000;
font: bold 10px Verdana;
margin: 0 50px 0 0;
} 
ul.newsticker span {
margin: 0 10px 0 0;
}
</style>
    <script type='text/javascript'>
    jQuery(function(){
        $.get('/api/event/atom', function(data){
            var $feed = $(data);
            var $ul = $('<ul class="newsticker" ></ul>');

            $feed.find('entry').each(function(){
                var $entry = $(this);
                var $li = $('<li class="news-item"></li>');
                var href = $entry.find('link').attr('href');
                $li.append( '<a href="' + href + '">' 
                    + $entry.find('title').text() 
                    + '</a>' );
                $ul.append($li);
            });
            $('#news_ticker').html($ul);
            $ul.liScroll({ travelocity: 0.03});
        }, 'xml');

    });
    </script>
    <script>
        var pp = {
            app: {},
            models: {},
            views: {},
            View: {},
            Model: {},
            Collection: {}
        };
    </script>

    <script src="/views/proto.js"></script>
    <script src="/views/app.js"></script>
    <script src="/views/notify.js"></script>
    <script src="/views/progress.js"></script>
    <script src="/views/proto-paged.js"></script>
    <script src="/views/dashboard.js"></script>
    <script src="/views/explore.js"></script>
    <script src="/views/home.js"></script>
    <script src="/views/quest/add.js"></script>
    <script src="/views/quest/big.js"></script>
    <script src="/views/quest/collection.js"></script>
    <script src="/views/quest/page.js"></script>
    <script src="/views/quest/small.js"></script>
    <script src="/views/quest/like.js"></script>
    <script src="/views/register.js"></script>
    <script src="/views/confirm-email.js"></script>
    <script src="/views/user/current.js"></script>
    <script src="/views/user/signin.js"></script>
    <script src="/views/user/settings.js"></script>
    <script src="/views/user/settings-box.js"></script>
    <script src="/views/user/notifications.js"></script>
    <script src="/views/user/notifications-box.js"></script>
    <script src="/views/user/big.js"></script>
    <script src="/views/user/small.js"></script>
    <script src="/views/user/collection.js"></script>
    <script src="/views/comment/collection.js"></script>
    <script src="/views/comment/normal.js"></script>
    <script src="/views/event/box.js"></script>
    <script src="/views/event/normal.js"></script>
    <script src="/views/event/collection.js"></script>
    <script src="/views/about.js"></script>

    <script src="/models/proto.js"></script>
    <script src="/models/user.js"></script>
    <script src="/models/another-user.js"></script>
    <script src="/models/current-user.js"></script>
    <script src="/models/user-settings.js"></script>
    <script src="/models/user-collection.js"></script>
    <script src="/models/event.js"></script>
    <script src="/models/event-collection.js"></script>
    <script src="/models/comment.js"></script>
    <script src="/models/comment-collection.js"></script>
    <script src="/models/quest.js"></script>
    <script src="/models/quest-collection.js"></script>

    <script src="/app.js"></script>

  </body>
</html>
<!--
vim: ts=2 sw=2 sts=2
-->
